{Adapter,Robot,TextMessage,EnterMessage,LeaveMessage} = require 'hubot'

url     = require 'url'
util    = require 'util'
request = require 'request'
Xmpp    = require 'node-xmpp'

#
DefaultAvatarId = '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'
DefaultAvatarContent = '87924d182ce6ac1766a0d0df6332d350a750cc3f'


#
_notify = (robot, status) ->
  jid = process.env.HUBOT_XMPP_USERNAME
  org = process.env.HUBOT_ORG_NAME
  notifyUrl = process.env.HUBOT_NOTIFY_URL
  username = process.env.API_AUTH_USERNAME
  password = process.env.API_AUTH_PASSWORD
  now = Date.now()

  #
  if (jid and org and notifyUrl and username and password)
    urlObj = url.parse(notifyUrl)
    robot.logger.info util.inspect(urlObj)

    parameters = "#{urlObj.pathname}?org=#{org}&status=#{status}&timestamp=#{now}&jid=#{jid}"
    auth = "Basic " + new Buffer(username + ":" + password).toString("base64");

    robot.logger.info "Going to notify api status"
    robot.logger.info "Status: #{status}"
    robot.logger.info "Org: #{org}"
    robot.logger.info "Jid: #{jid}"
    robot.logger.info "Api username: #{username}"
    robot.logger.info "Api password: #{password}"
    robot.logger.info "Parameters: #{parameters}"
    robot.logger.info "Auth: #{auth}"

    request.get notifyUrl, {qs:
                                org: org
                                jid: jid
                                status: status
                                timestamp: now
                            headers:
                                Authorization: auth
                            strictSSL: false
                            }, (err) ->
                                robot.logger.error err.toString() if err

class XmppBot extends Adapter
  run: ->
    options =
      username: process.env.HUBOT_XMPP_USERNAME
      password: '********'
      host: process.env.HUBOT_XMPP_HOST
      port: process.env.HUBOT_XMPP_PORT
      rooms:    @parseRooms process.env.HUBOT_XMPP_ROOMS.split(',')
      keepaliveInterval: 30000 # ms interval to send whitespace to xmpp server
      legacySSL: process.env.HUBOT_XMPP_LEGACYSSL
      preferredSaslMechanism: process.env.HUBOT_XMPP_PREFERRED_SASL_MECHANISM

    @robot.logger.info util.inspect(options)
    options.password = process.env.HUBOT_XMPP_PASSWORD

    @client = new Xmpp.Client
      reconnect: true
      jid: options.username
      password: options.password
      host: options.host
      port: options.port
      legacySSL: options.legacySSL
      preferredSaslMechanism: options.preferredSaslMechanism

    @client.on 'error', @.error
    @client.on 'online', @.online
    @client.on 'stanza', @.read
    @client.on 'offline', @.offline

    @options = options
    @connected = false

  error: (error) =>
    if error.code == "ECONNREFUSED"
      @robot.logger.error "Connection refused, exiting"
      setTimeout () ->
        process.exit(1)
      , 1500
    else if error.children?[0]?.name == "system-shutdown"
      @robot.logger.error "Server shutdown detected, exiting"
      setTimeout () ->
        process.exit(1)
      , 1500
    else
      @robot.logger.error error.toString()
      console.log util.inspect(error.children?[0]?.name, { showHidden: true, depth: 1 })

  online: =>
    @robot.logger.info 'Hubot XMPP client online'

    @client.send new Xmpp.Element('presence')
    @robot.logger.info 'Hubot XMPP sent initial presence'

    @joinRoom room for room in @options.rooms
    @unlockRoom room for room in @options.rooms

    #
    @notify 'online'

    #
    @publishAvatar
    @publishAvatarMetadata

    # send raw whitespace for keepalive
    @keepaliveInterval = setInterval =>
      @client.send ' '
    , @options.keepaliveInterval

    @emit if @connected then 'reconnected' else 'connected'
    @connected = true

  publishAvatar: =>
      avatarId = process.env.HUBOT_AVATAR_ID || DefaultAvatarId
      avatarContent = process.env.HUBOT_AVATAR_CONTENT || DefaultAvatarContent

      @robot.logger.info "Hubot avatar id #{avatarId}"
      @robot.logger.info "Hubot avatar content #{avatarContent}"

      @client.send do =>
        el = new Xmpp.Element('iq', from: @client.jid, id:'avatar1', to: room, type: 'set')

        x = el.c('pubsub', xmlns: 'http://jabber.org/protocol/pubsub')
              .c('publish', node: 'urn:xmpp:avatar:data')
              .c('item', id:avatarId)
              .c('data', xmlns: 'urn:xmpp:avatar:data')
              .t(avatarContent)

        return x

  publishAvatarMetadata: =>
      avatarId = process.env.HUBOT_AVATAR_ID || DefaultAvatarId

      @robot.logger.info "Hubot avatar id #{avatarId}"

      @client.send do =>
        el = new Xmpp.Element('iq', from: @client.jid, id:'avatar2', to: room, type: 'set')

        x = el.c('pubsub', xmlns: 'http://jabber.org/protocol/pubsub')
              .c('publish', node: 'urn:xmpp:avatar:metadata')
              .c('item', id:avatarId)
              .c('metadata', xmlns: 'urn:xmpp:avatar:metadata')
              .c('info', width:"64", height:"64", type:"image/png", bytes:28027, id:avatarId)

        return x

  notify: (status) =>
    @robot.logger.info "Notify to #{process.env.HUBOT_NOTIFY_URL} status #{status}"

    _notify @robot, status

  # Direct inviation - http://xmpp.org/extensions/xep-0249.html
  directlyInvite: (invitor, invitee, room, reason='') ->
    @robot.logger.info "Directly invite user #{invitee} to room #{room}"

    @client.send do =>
        message = new Xmpp.Element('message', from: invitor, to: invitee)
                          .c('x', xmlns: 'jabber:x:conference', jid: room, reason: reason)

        return message

  # Mediated invitation - http://xmpp.org/extensions/xep-0045.html#invite
  mediatedInvite: (invitee, room, reason='') ->
    @robot.logger.info "Mediately invite user #{invitee} to room #{room}"

    @client.send do =>
      message = new Xmpp.Element('message', to: room)
                        .c('x', xmlns: 'http://jabber.org/protocol/muc#user')
                        .c('invite', to: invitee)
                        .c('reason').t(reason)
      return message

  parseRooms: (items) ->
    rooms = []
    for room in items
      index = room.indexOf(':')
      rooms.push
        jid:      room.slice(0, if index > 0 then index else room.length)
        password: if index > 0 then room.slice(index+1) else false
    return rooms

  # XMPP kick a occupant froma room - http://xmpp.org/extensions/xep-0045.html#kick
  kickOccupant: (jid, room, reason='') ->
    @robot.logger.info "Kicking occupant #{jid} from room #{room}"

    @client.send do =>
      el = new Xmpp.Element('iq', from: @client.jid, id:'kick1', to: room, type: 'set')

      x = el.c('query', xmlns:'http://jabber.org/protocol/muc#admin')
            .c('item', jid:jid, role:'none')
            .c('reason').t(reason)

      return x

  # XMPP destroy an instant room - http://xmpp.org/extensions/xep-0045.html#destroyroom
  destroyRoom: (room, reason='') ->
    @robot.logger.info "Going to destroy room #{room}"

    @client.send do =>
      el = new Xmpp.Element('iq',to: room, type: "set", id: "destroy1")

      x = el.c('query', xmlns:'http://jabber.org/protocol/muc#owner')
            .c('destroy', jid: room)
            .c('reason').t(reason)

      return x

  # XMPP unlock an instant room - http://xmpp.org/extensions/xep-0045.html#createroom-instant
  unlockRoom: (room) ->
    @robot.logger.info "Unlock room #{room.jid}"

    @client.send do =>
      el = new Xmpp.Element('iq', to: room.jid, type: 'set', id: 'create1')

      x = el.c('query', xmlns: 'http://jabber.org/protocol/muc#owner')
            .c('x', xmlns:'jabber:x:data', type:'submit')

      return x

  # XMPP Joining a room - http://xmpp.org/extensions/xep-0045.html#enter-muc
  joinRoom: (room) ->
    @client.send do =>
      @robot.logger.debug "Joining #{room.jid}/#{@robot.name}"

      el = new Xmpp.Element('presence', to: "#{room.jid}/#{@robot.name}" )
      x = el.c('x', xmlns: 'http://jabber.org/protocol/muc' )
      x.c('history', seconds: 1 ) # prevent the server from confusing us with old messages
                                  # and it seems that servers don't reliably support maxchars
                                  # or zero values
      if (room.password) then x.c('password').t(room.password)
      return x

  # XMPP Leaving a room - http://xmpp.org/extensions/xep-0045.html#exit
  leaveRoom: (room) ->
    @client.send do =>
      @robot.logger.debug "Leaving #{room.jid}/#{@robot.name}"

      return new Xmpp.Element('presence', to: "#{room.jid}/#{@robot.name}", type: 'unavailable' )

  read: (stanza) =>
    if stanza.attrs.type is 'error'
      @robot.logger.error '[xmpp error]' + stanza
      return

    switch stanza.name
      when 'message'
        @readMessage stanza
      when 'presence'
        @readPresence stanza
      when 'iq'
        @readIq stanza

  readIq: (stanza) =>
    @robot.logger.debug "[received iq] #{stanza}"

    # Some servers use iq pings to make sure the client is still functional.  We need
    # to reply or we'll get kicked out of rooms we've joined.
    if (stanza.attrs.type == 'get' && stanza.children[0].name == 'ping')
      pong = new Xmpp.Element('iq',
        to: stanza.attrs.from
        from: stanza.attrs.to
        type: 'result'
        id: stanza.attrs.id
      )

      @robot.logger.debug "[sending pong] #{pong}"
      @client.send pong

  readMessage: (stanza) =>
    # ignore non-messages
    return if stanza.attrs.type not in ['groupchat', 'direct', 'chat']

    # ignore empty bodies (i.e., topic changes -- maybe watch these someday)
    body = stanza.getChild 'body'
    return unless body

    message = body.getText()
    [room, from] = stanza.attrs.from.split '/'
    @robot.logger.debug "Received message: #{message} in room: #{room}, from: #{from}"

    # ignore our own messages in rooms
    return if from == @robot.name or from == @options.username or from is undefined

    # note that 'from' isn't a full JID, just the local user part
    user = @robot.brain.userForId from
    user.type = stanza.attrs.type
    user.room = room

    @receive new TextMessage(user, message)

  readPresence: (stanza) =>
    jid = new Xmpp.JID(stanza.attrs.from)
    bareJid = jid.bare().toString()

    # xmpp doesn't add types for standard available mesages
    # note that upon joining a room, server will send available
    # presences for all members
    # http://xmpp.org/rfcs/rfc3921.html#rfc.section.2.2.1
    stanza.attrs.type ?= 'available'

    # Parse a stanza and figure out where it came from.
    getFrom = (stanza) =>
      if bareJid not in @options.rooms
        from = stanza.attrs.from
      else
        # room presence is stupid, and optional for some anonymous rooms
        # http://xmpp.org/extensions/xep-0045.html#enter-nonanon
        from = stanza.getChild('x', 'http://jabber.org/protocol/muc#user')?.getChild('item')?.attrs?.jid
      return from

    switch stanza.attrs.type
      when 'subscribe'
        @robot.logger.debug "#{stanza.attrs.from} subscribed to me"

        @client.send new Xmpp.Element('presence',
            from: stanza.attrs.to
            to:   stanza.attrs.from
            id:   stanza.attrs.id
            type: 'subscribed'
        )
      when 'probe'
        @robot.logger.debug "#{stanza.attrs.from} probed me"

        @client.send new Xmpp.Element('presence',
            from: stanza.attrs.to
            to:   stanza.attrs.from
            id:   stanza.attrs.id
        )
      when 'available'
        # for now, user IDs and user names are the same. we don't
        # use full JIDs as user ID, since we don't get them in
        # standard groupchat messages
        from = getFrom(stanza)
        return if not from?

        [room, from] = from.split '/'

        # ignore presence messages that sometimes get broadcast
        return if not @messageFromRoom room

        # If the presence is from us, track that.
        # Xmpp sends presence for every person in a room, when join it
        # Only after we've heard our own presence should we respond to
        # presence messages.
        if from == @robot.name or from == @options.username
          @heardOwnPresence = true
          return

        return unless @heardOwnPresence

        @robot.logger.debug "Availability received for #{from}"

        user = @robot.brain.userForId from, room: room, jid: jid.toString()
        @receive new EnterMessage user

      when 'unavailable'
        from = getFrom(stanza)

        [room, from] = from.split '/'

        # ignore presence messages that sometimes get broadcast
        return if not @messageFromRoom room

        # ignore our own messages in rooms
        return if from == @robot.name or from == @options.username

        @robot.logger.debug "Unavailability received for #{from}"

        user = @robot.brain.userForId from, room: room, jid: jid.toString()
        @receive new LeaveMessage(user)

  # Checks that the room parameter is a room the bot is in.
  messageFromRoom: (room) ->
    for joined in @options.rooms
      return true if joined.jid == room
    return false

  send: (envelope, messages...) ->
    for msg in messages
      @robot.logger.debug "Sending to #{envelope.room}: #{msg}"

      params =
        to: if envelope.user?.type in ['direct', 'chat'] then "#{envelope.room}/#{envelope.user.id}" else envelope.room
        type: envelope.user?.type or 'groupchat'

      if msg.attrs? # Xmpp.Element type
        message = msg.root()
        message.attrs.to ?= params.to
        message.attrs.type ?= params.type
      else
        message = new Xmpp.Element('message', params).
                  c('body').t(msg)

      @client.send message

  reply: (envelope, messages...) ->
    for msg in messages
      if msg.attrs? #Xmpp.Element
        @send envelope, msg
      else
        @send envelope, "#{envelope.user.name}: #{msg}"

  topic: (envelope, strings...) ->
    string = strings.join "\n"

    message = new Xmpp.Element('message',
                to: envelope.room
                type: envelope.user.type
              ).
              c('subject').t(string)

    @client.send message

  offline: =>
    @robot.logger.debug "Received offline event"
    clearInterval(@keepaliveInterval)

    @notify 'offline'

exports.use = (robot) ->
  new XmppBot robot
